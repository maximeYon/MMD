function res = mdm_unix2txt(in_fn, out_fn)% function res = mdm_unix2txt(in_fn, out_fn)%% Converts the unix text file 'in_fn' to the text file% 'out_fn'. If 'out_fn' is omitted, the original file is% overwritten. res = 1 in case of success.% Open the filesfidin = fopen(in_fn,'r');if (fidin == -1)    error(['The file ' in_fn ' does not exist.']);endif (nargin < 2)    fpath = fileparts(in_fn);    tmpname = [fpath,'ctempf.tmp'];    fido = fopen(tmpname,'wt');else    fido = fopen(out_fn,'wt');end% Read the complete file as a number vectorfilevec = fread(fidin,inf,'uchar');% Find the positions in the file vector where line-feeds should be madelfpos = find(filevec==10);% Go through the vector and write the linesspos = 1;  % Start position of each linefor i = 1:length(lfpos)    epos = lfpos(i)-1;  % End position of each line    fprintf(fido,'%s\n',char(filevec(spos:epos)));    spos = lfpos(i)+1;end% Write the last linefprintf(fido,'%s',char(filevec(spos:length(filevec))));fclose(fidin);fclose(fido);if (nargin < 2)    delete(in_fn);    copyfile(tmpname,in_fn);    delete(tmpname);endres = 1;